{"@bean": "com.cyoda.plugins.datasource.dtos.DataSourceConfigsContainerDto", "dataSources": [], "chainings": [], "mappings": [{"id": "a0cfc970-b884-11ee-8985-72add249621b", "name": "Nobel Prizes Container", "lastUpdated": 1712795406480, "dataType": "JSON", "description": "", "entityMappings": [{"id": {"id": "a0cda690-b884-11ee-8985-72add249621b"}, "name": "Nobel Prizes Container", "entityClass": "com.cyoda.tdb.model.table.TableEntityContainer", "entityRelationConfigs": [{"srcRelativeRootPath": "root:/"}], "columns": [], "functionalMappings": [], "columnPathsForUniqueCheck": [], "metadata": [], "cobiCoreMetadata": [], "script": {"body": "var ArrayList = Java.type('java.util.ArrayList');\nvar TableRow = Java.type('net.cyoda.saas.model.TableRow');\n\nvar data = input.get(\"data\");\nvar prizes = data.prizes;\n\nlog.info(data);\nlog.info(prizes);\n\nvar rows = new ArrayList();\nentity.setTableEntities(rows);\n\nprizes.forEach(function(prize){\n    var year = prize.year || 'not-given';\n    var category = prize.category || 'not-given';\n\n    var laureates = prize.laureates || [];\n\n    laureates.forEach(function(laureate) {\n        var row = new TableRow();\n        row.tableName = \"NobelPrizes\";\n        row.tableVersion = 1;\n        var firstname = laureate.firstname || 'not-given';\n        var lastname = laureate.surname || 'not-given';\n\n        row.indexedValues.strings.put(\"year\",year);\n        row.indexedValues.strings.put(\"category\",category);\n        row.indexedValues.strings.put(\"firstname\",firstname);\n        row.indexedValues.strings.put(\"lastname\",lastname);\n\n        var keys = [year,category,firstname,lastname];\n        row.compositeKey = tableSupport.getCompositeKey(keys);\n        rows.add(row);\n    });\n});\n\n", "inputSrcPaths": ["data/prizes/*/year", "data/prizes/*/category", "data/prizes/*/laureates/*/firstname", "data/prizes/*/laureates/*/surname", "tableName"], "inputMetaPaths": [], "reusableScripts": []}, "entityFilter": {"@bean": "com.cyoda.core.conditions.GroupCondition", "operator": "AND", "conditions": []}}], "sampleContent": "{\"source\":\"taken from http://api.nobelprize.org/v1/prize.json\",\"tableName\":\"NobelPrizes\",\"data\":{\"prizes\":[{\"year\":\"2020\",\"category\":\"chemistry\",\"laureates\":[{\"id\":\"991\",\"firstname\":\"Emmanuelle\",\"surname\":\"Charpentier\",\"motivation\":\"\\\"for the development of a method for genome editing\\\"\",\"share\":\"2\"},{\"id\":\"992\",\"firstname\":\"Jennifer A.\",\"surname\":\"Doudna\",\"motivation\":\"\\\"for the development of a method for genome editing\\\"\",\"share\":\"2\"}]},{\"year\":\"2020\",\"category\":\"economics\",\"laureates\":[{\"id\":\"995\",\"firstname\":\"Paul\",\"surname\":\"Milgrom\",\"motivation\":\"\\\"for improvements to auction theory and inventions of new auction formats\\\"\",\"share\":\"2\"},{\"id\":\"996\",\"firstname\":\"Robert\",\"surname\":\"Wilson\",\"motivation\":\"\\\"for improvements to auction theory and inventions of new auction formats\\\"\",\"share\":\"2\"}]},{\"year\":\"2020\",\"category\":\"literature\",\"laureates\":[{\"id\":\"993\",\"firstname\":\"Louise\",\"surname\":\"Gl\u00fcck\",\"motivation\":\"\\\"for her unmistakable poetic voice that with austere beauty makes individual existence universal\\\"\",\"share\":\"1\"}]},{\"year\":\"2020\",\"category\":\"peace\",\"laureates\":[{\"id\":\"994\",\"motivation\":\"\\\"for its efforts to combat hunger, for its contribution to bettering conditions for peace in conflict-affected areas and for acting as a driving force in efforts to prevent the use of hunger as a weapon of war and conflict\\\"\",\"share\":\"1\",\"firstname\":\"World Food Programme\"}]},{\"year\":\"2020\",\"category\":\"physics\",\"laureates\":[{\"id\":\"988\",\"firstname\":\"Roger\",\"surname\":\"Penrose\",\"motivation\":\"\\\"for the discovery that black hole formation is a robust prediction of the general theory of relativity\\\"\",\"share\":\"2\"},{\"id\":\"989\",\"firstname\":\"Reinhard\",\"surname\":\"Genzel\",\"motivation\":\"\\\"for the discovery of a supermassive compact object at the centre of our galaxy\\\"\",\"share\":\"4\"},{\"id\":\"990\",\"firstname\":\"Andrea\",\"surname\":\"Ghez\",\"motivation\":\"\\\"for the discovery of a supermassive compact object at the centre of our galaxy\\\"\",\"share\":\"4\"}]},{\"year\":\"2020\",\"category\":\"medicine\",\"laureates\":[{\"id\":\"985\",\"firstname\":\"Harvey\",\"surname\":\"Alter\",\"motivation\":\"\\\"for the discovery of Hepatitis C virus\\\"\",\"share\":\"3\"},{\"id\":\"986\",\"firstname\":\"Michael\",\"surname\":\"Houghton\",\"motivation\":\"\\\"for the discovery of Hepatitis C virus\\\"\",\"share\":\"3\"},{\"id\":\"987\",\"firstname\":\"Charles\",\"surname\":\"Rice\",\"motivation\":\"\\\"for the discovery of Hepatitis C virus\\\"\",\"share\":\"3\"}]}]}}", "metadata": "{\"entityMappingsMetaDatas\":[{\"uiId\":1,\"cobiPathsRelations\":[{\"srcColumnPath\":\"data/prizes/*/year\",\"jsonPath\":\"\",\"dstColumnPath\":\"\"},{\"srcColumnPath\":\"data/prizes/*/category\",\"jsonPath\":\"\",\"dstColumnPath\":\"\"},{\"srcColumnPath\":\"data/prizes/*/laureates/*/firstname\",\"jsonPath\":\"\",\"dstColumnPath\":\"\"},{\"srcColumnPath\":\"data/prizes/*/laureates/*/surname\",\"jsonPath\":\"\",\"dstColumnPath\":\"\"},{\"srcColumnPath\":\"tableName\",\"jsonPath\":\"tableName\",\"dstColumnPath\":\"\"}],\"isShowNoneMappingFields\":true,\"isPolymorphicList\":false}]}"}]}